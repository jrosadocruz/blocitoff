<% if @task.valid? %>
  //  j is sintactic sugar escape_javascript
  $('.js-tasks').append("<%= j(render(@task)) %>");
  $('.new-task').html("<%= j(render partial: 'tasks/form', locals: { task: @new_task }) %>");
  $('#errors').html("<%= j(render partial: 'shared/notifications') %>");
  $('#task-count').html("<%= @user.tasks.count %>");
<% else %>
  $('.new-task').html("<%= j(render partial: 'tasks/form', locals: { task: @task }) %>");
  $('#errors').html("<%= j(render partial: 'shared/notifications') %>");
<% end %>
